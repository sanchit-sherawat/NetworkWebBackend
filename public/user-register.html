<!doctype html>
<html lang="zxx">

<head>
	<!-- REQUIRED META TAGS -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- FAVICON -->
	<link rel="icon" type="image/png" href="assets/img/favicon.png">
	<!-- TITLE -->
	<title>Registration - VIRON.NETWORK</title>

	<!-- BOOTSTRAP CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<!-- OWL THEME DEFAULT CSS -->
	<link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
	<!-- OWL CAROUSEL CSS -->
	<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
	<!-- ANIMATE CSS -->
	<link rel="stylesheet" href="assets/css/animate.css">
	<!-- BOXICONS CSS -->
	<link rel="stylesheet" href="assets/css/boxicons.min.css">
	<!-- FLATICON CSS -->
	<link rel="stylesheet" href="assets/css/flaticon.css">
	<!-- MEANMENU CSS -->
	<link rel="stylesheet" href="assets/css/meanmenu.css">
	<!-- NICE SELECT CSS -->
	<link rel="stylesheet" href="assets/css/nice-select.css">
	<!-- ODOMETER CSS-->
	<link rel="stylesheet" href="assets/css/odometer.css">
	<!-- AOS CSS -->
	<link rel="stylesheet" href="assets/css/aos.css">
	<!-- STYLE CSS -->
	<link rel="stylesheet" href="assets/css/style.css">
	<!-- RESPONSIVE CSS -->
	<link rel="stylesheet" href="assets/css/responsive.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css" />
	<style>
		.iti,
		.iti--allow-dropdown {
			display: block !important;
			width: 100% !important;
		}
		.pwdsh{
			position: absolute;
			right: 1.75rem;
			top: 33%;
			transform: translateY(-50%);
			cursor: pointer;
			font-size: 18px;
			color:#535a60;
		}
	</style>

</head>

<body>
	<div class="loader js-preloader">
		<div></div>
		<div></div>
		<div></div>
	</div>

	<!-- START NAV AREA -->
	<div class="nav-area">
		<div class="navbar-area">
			<section id="user-profile-section" style="display: none; background-color: #f8f9fa; padding: 20px; text-align: center;">
					<div class="container">
						<div id="userInfo"></div>
					</div>
				</section>
			<div class="main-nav">
				<nav class="navbar navbar-expand-md">
					<div class="container">
						<a class="navbar-brand" href="home">
							<img src="assets/img/viron-logo.svg" alt="Logo">
						</a>

						<div class="collapse navbar-collapse mean-menu">
							<ul class="navbar-nav m-auto">
								<li class="nav-item">
									<a href="home" class="nav-link">Home</a>
								</li>
								<li class="nav-item">
									<a href="how-it-works" class="nav-link">How It Works</a>
								</li>
								<li class="nav-item">
									<a href="about-us" class="nav-link ">About Us</a>
								</li>
								<li class="nav-item">
									<a href="meet-our-team" class="nav-link">Meet Our Team</a>
								</li>
								<li class="nav-item">
									<a href="our-mission" class="nav-link">Our Mission</a>
								</li>
								<li class="nav-item">
									<a href="testimonials" class="nav-link">Testimonial</a>
								</li>
								<li class="nav-item">
									<a href="contact-us" class="nav-link">Contact Us</a>
								</li>
							</ul>

							<!-- Start Others Option -->
							<div class="nav-others-option desktop d-flex align-items-center">
								<a href="registration" class="default-btn icon menu-btn-style">
									Registration
								</a> &nbsp;
								<a href="https://viron.network/member//#/loginPage"
									class="default-btn blue-btn icon menu-btn-style">
									Login
								</a>
							</div>
							<!-- End Others Option -->
						</div>
					</div>
				</nav>
			</div>

			<!-- Menu For Mobile Device -->
			<div class="mobile-nav">
				<a href="index" class="logo">
					<img src="assets/img/viron-logo.svg" alt="VIRON">
				</a>
				<!-- Start Others Option -->
				<div class="container">
					<div class="dot-menu">
						<div class="inner">
							<div class="circle circle-one"></div>
							<div class="circle circle-two"></div>
							<div class="circle circle-three"></div>
						</div>
					</div>
					<div class="container">
						<div class="option-inner">
							<div class="nav-others-option d-flex align-items-center">
								<a href="registration" class="default-btn icon menu-btn-style">Registration</a>
							</div>
							<div class="nav-others-option d-flex align-items-center">
								<a href="https://viron.network/member//#/loginPage"
									class="default-btn blue-btn icon menu-btn-style">Login</a>
							</div>
						</div>
					</div>
				</div>
				<!-- End Others Option -->
			</div>
		</div>
	</div>
	<!-- END NAV AREA -->

	<!-- START PAGE TITLE AREA -->
	<div class="page-title-area bg-1">
		<div class="container">
			<div class="page-title-content">
				<h2>Registration</h2>
			</div>
		</div>
	</div>
	<!-- END PAGE TITLE AREA -->

	<!-- START SIGN UP AREA -->
	<section class="user-area-style log-in-area pb-100 pt-50">
		<div class="container">
			<div class="contact-form-action">
				<div data-aos="fade-up" data-aos-duration="1200" class="section-title">
					<h3 class="text-red mt-0">Please create your VIRON account below:</h3>
				</div>
				<!-- ...existing code... -->
				<form id="registerForm" data-aos="fade-up" data-aos-duration="1600">
					<div class="row">
						<div class="col-12">
							<div class="form-group">
								<input class="form-control" id="user_name" type="text" name="user_name"
									placeholder="Username" required>
								<small id="username-check-message" style="color:red;"></small>
							</div>
						</div>
						<div class="col-12">
							<div class="form-group">
								<input class="form-control" type="password" id="password" name="password"
									placeholder="Password" required>
									<span id="togglePassword" class="pwdsh"><i class="bx bx-hide" id="toggleIcon"></i></span>
							</div>
						</div>
						<div class="col-12">
							<div class="form-group">
								<input class="form-control" id="first_name" type="text" name="first_name"
									placeholder="First Name " required>
							</div>
						</div>
						<div class="col-12">
							<div class="form-group">
								<input class="form-control" id="last_name" type="text" name="last_name"
									placeholder="Last Name " required>
							</div>
						</div>
						<div class="col-12">
							<div class="form-group">
								<input class="form-control" id="email" type="email" name="email" placeholder="Email "
									required>
							</div>
						</div>
						<div class="col-12">
							<div class="form-group">
								<input id="phone" class="form-control" type="tel" name="phone"
									placeholder="Phone Number " required>
							</div>
						</div>
						<div class="col-4">
							<div class="form-group">
								<input id="country" class="form-control" type="text" name="country"
									placeholder="Country" >
							</div>
						</div>
						<div class="col-4">
							<div class="form-group">
								<input id="state" class="form-control" type="text" name="state" placeholder="State">
							</div>
						</div>
						<div class="col-4">
							<div class="form-group">
								<input id="city" class="form-control" type="text" name="city" placeholder="City"
									>
							</div>
						</div>
						<div class="col-6">
							<div class="form-group">
								<input id="province" class="form-control" type="text" name="province"
									placeholder="Province" >
							</div>
						</div>
						<div class="col-6">
							<div class="form-group">
								<input id="zip_code" class="form-control" type="text" name="zip_code"
									placeholder="Zip Code" >
							</div>
						</div>
						<div class="col-12">
							<button class="default-btn btn-two" type="submit" id="register-submit-btn">
								SUBMIT NOW
							</button>
						</div>
					</div>
				</form>
				<!-- ...existing code... -->
			</div>
		</div>
	</section>
	<!-- END SIGN UP AREA -->

	<!-- START FOOTER TOP AREA -->
	<footer class="footer-top-area pt-100 pb-70">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6">
					<div class="single-widget text-center">
						<a href="javascript:void(0)">
							<img src="assets/img/viron-logo-footer.svg" style="margin-top: 50%; margin-bottom:50%"
								alt="VIRON.NETWORK">
						</a>
					</div>
				</div>

				<div class="col-lg-3 col-md-6">
					<div class="single-widget pl-40">
						<h3>Navigation</h3>
						<ul>
							<li>
								<a href="home">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									Home
								</a>
							</li>
							<li>
								<a href="how-it-works">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									How It Works
								</a>
							</li>
							<li>
								<a href="about-us">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									About Us
								</a>
							</li>
							<li>
								<a href="meet-our-team">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									Meet Our Team
								</a>
							</li>
							<li>
								<a href="our-mission">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									Our Mission
								</a>
							</li>
							
							<li>
								<a href="testimonials">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									Testimonials
								</a>
							</li>
							<li>
								<a href="contact-us">
									<i class="right-icon bx bx-right-arrow-alt"></i>
									Contact Us
								</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="col-lg-3 col-md-6">
					<div class="single-widget">
						<h3>Access</h3>
						<ul>
							<li>
								<a href="registration" class="default-btn">
									Register
								</a>
							</li>
							<li>
								<a href="https://viron.network/member//#/loginPage" class="default-btn blue-btn">
									Login
								</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="col-lg-3 col-md-6">
					<div class="single-widget">
						<h3>Social Media (coming soon)</h3>
						<ul class="social-icon">
							<li>
								<a href="javascript:void(0)">
									<i class="bx bxl-facebook"></i>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="bx bxl-instagram"></i>
								</a>
							</li>

							<li>
								<a href="javascript:void(0)">
									<i class="bx bxl-youtube"></i>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="bx bxl-twitter"></i>
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- END FOOTER TOP AREA -->

	<!-- START FOOTER BOTTOM AREA -->
	<footer class="footer-bottom-area">
		<div class="container">
			<div class="copy-right">
				<p>Copyright <i class="bx bx-copyright"></i> 2025 VIRON.NETWORK. All rights reserved.</p>
				<p><a href="faq"><b>FAQ</b></a> | <a href="privacy-policy"><b>Privacy Policy</b></a> | <a href="disclaimer"><b>Disclaimer</b></a> | <a href="terms-of-use"><b>Terms of Use</b></a> | <a href="service-agreement"><b>Service Agreement</b></a></p>
			</div>
		</div>
	</footer>
	<!-- END FOOTER BOTTOM AREA -->

	<!-- START GO TOP AREA -->
	<div class="go-top">
		<i class='bx bx-chevrons-up'></i>
	</div>
	<!-- END GO TOP AREA -->
<script>
		(function () {
			const knownPages = [
				"home", "how-it-works", "about-us", "meet-our-team", "our-mission", "testimonials", "contact-us", "registration", "login", "set-password", "confirmation",
				"reverend-abraham-yew", "mr-kevin-rhodes", "mr-le-hoang-Vinh", "mr-jason-paul", "ms-jennifer-smylie", "dr-la-sheika-scales",
				"professional-salesman-international", "viron-advanced-intelligence-vai", "viron-consortium-international-vci",
                "mr-dan-dupey", "mr_jason-paul",
				"faq", "privacy-policy", "disclaimer", "terms-of-use", "service-agreement"
			];

			const path = window.location.pathname.replace(/^\/+|\/+$/g, '');
			// Clear localStorage if path is empty (homepage)
			if (!path) {
				localStorage.removeItem("userName");
				localStorage.removeItem("firstName");
				localStorage.removeItem("lastName");
			}

			if (path && !knownPages.includes(path)) {
				fetch(`/api/getuser/${path}`)
					.then(res => res.json())
					.then(user => {
						const section = document.getElementById("user-profile-section");
						const container = document.getElementById("userInfo");

						if (user && user.userName) {
							localStorage.setItem("userName", user.userName);
							localStorage.setItem("firstName", user.firstName);
							localStorage.setItem("lastName", user.lastName);
							section.style.display = "block";
							container.innerHTML = `
              <p>Welcome to  ${user.firstName}  ${user.lastName} website!</p>
            `;
						} else {
							localStorage.removeItem("userName");
							localStorage.removeItem("firstName");
							localStorage.removeItem("lastName");
						}
					})
					.catch(err => {
						document.getElementById("user-profile-section").style.display = "block";
						document.getElementById("userInfo").innerHTML = `<p class="text-danger">Error fetching user info.</p>`;
					});
			}
		})();
	</script>

	<!-- JQUERY.SLIM.MIN.JS -->
	<script src="assets/js/jquery.slim.min.js"></script>
	<!-- POPPER JS -->
	<script src="assets/js/popper.min.js"></script>
	<!-- BOOTSTRAP JS -->
	<script src="assets/js/bootstrap.min.js"></script>
	<!-- MEANMENU JS -->
	<script src="assets/js/jquery.meanmenu.js"></script>
	<!-- WOW JS -->
	<script src="assets/js/wow.min.js"></script>
	<!-- OWL CAROUSEL JS -->
	<script src="assets/js/owl.carousel.js"></script>
	<!-- NICE SELECT JS -->
	<script src="assets/js/jquery.nice-select.min.js"></script>
	<!-- APPEAR JS -->
	<script src="assets/js/jquery.appear.js"></script>
	<!-- ODOMETER JS -->
	<script src="assets/js/odometer.min.js"></script>
	<!-- AOS JS -->
	<script src="assets/js/aos.js"></script>
	<!-- CUSTOM JS -->
	<script src="assets/js/custom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>


	<!-- <script> -->
	<script>
		const input = document.querySelector("#phone");
		const iti = window.intlTelInput(input, {
			separateDialCode: false,
			preferredCountries: ["vn", "us", "gb"],
			utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"
		});

		document.getElementById('registerForm').addEventListener('submit', async function (e) {
			e.preventDefault();

			const form = e.target;
			const fullPhone = iti.getNumber(); // E.g. +919876543210
			// / Get userReferId from URL query params
			const urlParams = new URLSearchParams(window.location.search);
			const userReferId = urlParams.get('userId');

			const data = {
				username: form.user_name.value,
				password: form.password.value,
				firstName: form.first_name.value,
				lastName: form.last_name.value,
				email: form.email.value,
				phoneNumber: fullPhone,
				userReferId: userReferId,
				country: form.country.value,
				state: form.state.value,
				city: form.city.value,
				province: form.province.value,
				zip: form.zip_code.value
			};


			try {
				const response = await fetch('/api/register', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(data)
				});

				const result = await response.json();
				if (response.ok) {
					// Redirect to confirmation page
					window.location.href = `registration-confirmation.html?username=${encodeURIComponent(data.username)}&email=${encodeURIComponent(data.email)}&firstName=${encodeURIComponent(data.firstName)}&lastName=${encodeURIComponent(data.lastName)}&password=${encodeURIComponent(data.password)}`;
				} else {
					alert(result.message || 'Registration failed.');
				}
			} catch (err) {
				alert('An error occurred.');
			}
		});
	</script>
	<script>
		const usernameInput = document.getElementById('user_name');
		const usernameMessage = document.getElementById('username-check-message');
		const submitBtn = document.getElementById('register-submit-btn');

		let usernameAvailable = false;

		usernameInput.addEventListener('blur', async () => {
			const username = usernameInput.value.trim();

			// Clear message if input is empty
			if (!username) {
				usernameMessage.textContent = '';
				submitBtn.disabled = true;
				usernameAvailable = false;
				return;
			}

			try {
				const response = await fetch(`/api/check-username?username=${encodeURIComponent(username)}`);
				const result = await response.json();

				if (!response.ok) {
					usernameMessage.textContent = 'Error checking username. Try again later.';
					submitBtn.disabled = true;
					usernameAvailable = false;
				} else if (!result.exists) {
					usernameMessage.textContent = 'Username is Available.';
					usernameMessage.style.color = 'green';
					submitBtn.disabled = false;
					usernameAvailable = true;
				} else {
					usernameMessage.textContent = 'Username is not available.';
					usernameMessage.style.color = 'red';
					submitBtn.disabled = true;
					usernameAvailable = false;
				}
			} catch (error) {
				usernameMessage.textContent = 'Error checking username. Try again later.';
				submitBtn.disabled = true;
				usernameAvailable = false;
			}
		});

		// Prevent form submission if username is not available
		document.getElementById('registerForm').addEventListener('submit', function (e) {
			if (!usernameAvailable) {
				e.preventDefault();
				alert('Please choose an available username before submitting.');
			}
		});
	</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const passwordInput = document.getElementById("password");
    const togglePassword = document.getElementById("togglePassword");
    const toggleIcon = document.getElementById("toggleIcon");

    togglePassword.addEventListener("click", function () {
      const isPassword = passwordInput.type === "password";
      passwordInput.type = isPassword ? "text" : "password";
      toggleIcon.classList.toggle("bx-show");
      toggleIcon.classList.toggle("bx-hide");
    });
  });
</script>


</body>

</html>